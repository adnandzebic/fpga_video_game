Open Picoblaze Assembler log for program "software.psm"
Generated by opbasm v 1.2
  Assembled on 2015-11-30T19:17:49
  Picoblaze-6 mode

  Last occupied address: 7FF hex
  Nominal program memory size: 2K (2048)  address(10:0)
  Actual memory size: 4096
  Occupied memory locations: 670
  Memory locations available: 3426
  Scratchpad size: 256


Assembly listing
----------------
000                             ;;============================================================================
000                             ;; File: software.psm
000                             ;; This is the PicoBlaze program for EE178 Lab #8.
000                             ;;============================================================================

000                             ;;============================================================================
000                             ;; Port address declarations.
000                             ;;============================================================================

000                             CONSTANT stax, 00              ; port for 8-bit start-x
000                             CONSTANT stay, 01              ; port for 8-bit start-y
000                             CONSTANT endx, 02              ; port for 8-bit end-x
000                             CONSTANT endy, 03              ; port for 8-bit end-y
000                             CONSTANT busy, 04              ; port for 8-bit busy
000                             CONSTANT beam, 05              ; port for 8-bit beam
000                             CONSTANT mode, 06              ; port for 8-bit mode
000                             CONSTANT prng, 07              ; port for 8-bit prng
000                             CONSTANT leds_lo, 08           ; port for 8-bit led data out
000                             CONSTANT leds_hi, 09           ; port for 8-bit led data out
000                             CONSTANT qssd_lo, 0a           ; port for 8-bit qssd data out
000                             CONSTANT qssd_hi, 0b           ; port for 8-bit qssd data out
000                             CONSTANT qssd_dp, 0c           ; port for 8-bit qssd data out
000                             CONSTANT switches_lo, 0d       ; port for 8-bit switch input
000                             CONSTANT switches_hi, 0e       ; port for 8-bit switch input
000                             CONSTANT buttons, 0f           ; port for 8-bit button input

000                             CONSTANT zero, 00              ; zero
000                             CONSTANT one, 01               ; one

000                             CONSTANT busy_go, 01           ; go command and busy status

000                             CONSTANT beam_hi, 0f           ; beam high intensity
000                             CONSTANT beam_md, 07           ; beam med intensity
000                             CONSTANT beam_lo, 03           ; beam low intensity

000                             CONSTANT mode_hld, 00          ; mode hold framebuffer
000                             CONSTANT mode_clr, 01          ; mode clear framebuffer
000                             CONSTANT mode_lin, 02          ; mode linear decay
000                             CONSTANT mode_exp, 03          ; mode exponential decay

000                             CONSTANT buttons_ct, 10        ; center
000                             CONSTANT buttons_up, 08        ; up
000                             CONSTANT buttons_dn, 04        ; down
000                             CONSTANT buttons_lf, 02        ; left
000                             CONSTANT buttons_rt, 01        ; right

000                             ;;============================================================================
000                             ;; Macro State declarations
000                             ;;============================================================================

000                             CONSTANT START_STATE, 00       ; start screen state
000                             CONSTANT PLAY_STATE, 01        ; play state
000                             CONSTANT GAMEOVER_STATE, 02    ; game over screen state
000                             CONSTANT CREDITS_STATE, 03     ; credits screen state (not used for now)

000                             ;;============================================================================
000                             ;; Boot.
000                             ;;============================================================================

000  01000                boot: LOAD s0, zero                  ; initialize
001  01100                      LOAD s1, zero                  ; initialize
002  01200                      LOAD s2, zero                  ; initialize
003  01300                      LOAD s3, zero                  ; initialize
004  01400                      LOAD s4, zero                  ; initialize
005  01900                      LOAD s9, START_STATE           ; initial state is to enter start screen
006  01A00                      LOAD sa, 00                    ; initial distance (score)
007  01B00                      LOAD sb, 00                    ; initial distance (score)
008  01C80                      LOAD sc, 80                    ; starting helicopter position
009  01D05                      LOAD sd, 05                    ; initialize (needed later)
00A  01EFF                      LOAD se, FF                    ; load 255 into sE (horizontal coordinate of block)
00B  01F62                      LOAD sf, 62                    ; load 108 into sF (vertical coordinate of block)
00C  01503                      LOAD s5, mode_exp              ; load desired mode
00D  2D506                      OUTPUT s5, mode                ; set desired mode
00E  0150F                      LOAD s5, beam_hi               ; load desired beam
00F  2D505                      OUTPUT s5, beam                ; set desired beam
010  28001                      ENABLE INTERRUPT               ; enable interrupts

011                             ;;============================================================================
011                             ;; Main.
011                             ;;============================================================================

011                       main:
011  22011                      JUMP main                      ; go back and repeat

012                             ;;============================================================================
012                             ;; Interrupt - Service Routine.
012                             ;;============================================================================

012  1D900                 isr: COMPARE s9, START_STATE        ; check if in the start state
013  30019                      CALL Z, start                  ; call the start screen state
014  1D901                      COMPARE s9, PLAY_STATE         ; check if in the play state
015  30032                      CALL Z, play                   ; call play subroutine
016  1D902                      COMPARE s9, GAMEOVER_STATE     ; check if in the gameover state
017  30022                      CALL Z, gameover               ; call the gameover subroutine

018  29001                      RETURNI ENABLE                 ; done with isr

019                             ;;============================================================================
019                             ;; Start - Start Subroutine
019                             ;;============================================================================

019  0950F               start: INPUT s5, buttons              ; get center button values
01A  20047                      CALL start_screen              ; draw the map using map subroutine

01B  0950F                      INPUT s5, buttons              ; get button values
01C  1D510                      COMPARE s5, buttons_ct         ; check if center button is pressed
01D  3201F                      JUMP Z, enter_play_state       ; jump to enter_play_state
01E  36021                      JUMP NZ, stay_in_start_state   ; remain in current state with a jump to stay_in_start_state

01F           enter_play_state:
01F  01901                      LOAD s9, PLAY_STATE            ; load play_state and enter play mode
020  25000                      RETURN                         ; return from start subroutine

021        stay_in_start_state:
021  25000                      RETURN                         ; return from start subroutine

022                             ;;============================================================================
022                             ;; Game Over - Game Over Subroutine
022                             ;;============================================================================

022  0950F            gameover: INPUT s5, buttons              ; get center button values
023                             ;CALL map                            ; draw the map using map subroutine

023  0950F                      INPUT s5, buttons              ; get button values
024  1D510                      COMPARE s5, buttons_ct         ; check if center button is pressed
025  32027                      JUMP Z, enter_play_state2      ; jump to enter_play_state2
026  36031                      JUMP NZ, stay_in_gameover_state ; remain in current state with a jump to stay_in_gameover_state

027          enter_play_state2:
027  01901                      LOAD s9, PLAY_STATE            ; load play_state and enter play mode

028                             ;; RESET EVERYTHING BEFORE RETURNING
028  01A00                      LOAD sa, 00                    ; initial distance (score)
029  01B00                      LOAD sb, 00                    ; initial distance (score)
02A  2DB0A                      OUTPUT sb, qssd_lo             ; reset qssd_lo
02B  2DA0B                      OUTPUT sa, qssd_hi             ; reset qssd_hi
02C  01C80                      LOAD sc, 80                    ; starting helicopter position
02D  01D05                      LOAD sd, 05                    ; initialize (needed later)
02E  01EFF                      LOAD se, FF                    ; load 255 into sE (horizontal coordinate of block)
02F  01F62                      LOAD sf, 62                    ; load 108 into sF (vertical coordinate of block)
030  25000                      RETURN                         ; return from start subroutine

031        stay_in_gameover_state:
031  25000                      RETURN                         ; return from start subroutine

032                             ;;============================================================================
032                             ;; Play - Play Subroutine
032                             ;;============================================================================

032  0950F                play: INPUT s5, buttons              ; get center button values
033  2003C                      CALL map                       ; draw the map using map subroutine

034  0950F                      INPUT s5, buttons              ; get button values
035  1D510                      COMPARE s5, buttons_ct         ; check if center button is pressed
036  301AD                      CALL Z, move_heli_up           ; call subroutine that moves the helicopter up

037  2016F                      CALL draw_helicopter           ; draw the helicopter
038  201A1                      CALL random_block_location     ; determines a random place for the block (y direction only)
039  20174                      CALL draw_block                ; draw the block using draw_block subroutine
03A  20269                      CALL check_collision           ; check if any collisions happen

03B  25000                      RETURN                         ; finished with play subroutine

03C                             ;;============================================================================
03C                             ;; Map - Draw Map Subroutine
03C                             ;;============================================================================

03C                        map:

03C                             ;;============================================================================
03C                             ;; Draws Top Line of Map (Line 1)
03C                             ;;============================================================================

03C  01000                      LOAD s0, 00                    ; load 00 into s0
03D  0110F                      LOAD s1, 0F                    ; load 0F into s1
03E  012FF                      LOAD s2, FF                    ; load FF into s2
03F  0130F                      LOAD s3, 0F                    ; load 0F into s3
040  20259                      CALL draw_line                 ; draws the line

041                             ;;============================================================================
041                             ;; Draws Bottom Line of Map (Line 2)
041                             ;;============================================================================

041  01000                      LOAD s0, 00                    ; load 00 into s0
042  011F0                      LOAD s1, F0                    ; load 0F into s1
043  012FF                      LOAD s2, FF                    ; load FF into s2
044  013F0                      LOAD s3, F0                    ; load F0 into s3
045  20259                      CALL draw_line                 ; draws the line

046  25000                      RETURN                         ; go back from drawing map

047                             ;;============================================================================
047                             ;; Start Screen - Draw Start Screen Subroutine
047                             ;;============================================================================

047               start_screen:

047                             ;;============================================================================
047                             ;; Draws Decoration (Line 1a)
047                             ;;============================================================================

047  01000                      LOAD s0, 00                    ; load 00 into s0
048  0110A                      LOAD s1, 0A                    ; load 0A into s1
049  012FF                      LOAD s2, FF                    ; load FF into s2
04A  0130A                      LOAD s3, 0A                    ; load 0A into s3
04B  20259                      CALL draw_line                 ; draws the line

04C                             ;;===========================================================================
04C                             ;; Draws Decoration (Line 2a)
04C                             ;;============================================================================

04C  01000                      LOAD s0, 00                    ; load 00 into s0
04D  0110C                      LOAD s1, 0C                    ; load 0C into s1
04E  012FF                      LOAD s2, FF                    ; load FF into s2
04F  0130C                      LOAD s3, 0C                    ; load 0C into s3
050  20259                      CALL draw_line                 ; draws the line

051                             ;;===========================================================================
051                             ;; Draws Decoration (Line 3a)
051                             ;;============================================================================

051  01000                      LOAD s0, 00                    ; load 00 into s0
052  0110E                      LOAD s1, 0E                    ; load 0E into s1
053  012FF                      LOAD s2, FF                    ; load FF into s2
054  0130E                      LOAD s3, 0E                    ; load 0E into s3
055  20259                      CALL draw_line                 ; draws the line

056                             ;;============================================================================
056                             ;; Draws Decoration (Line 1b)
056                             ;;============================================================================

056  01000                      LOAD s0, 00                    ; load 00 into s0
057  01188                      LOAD s1, 88                    ; load 88 into s1
058  012FF                      LOAD s2, FF                    ; load FF into s2
059  01388                      LOAD s3, 88                    ; load 88 into s3
05A  20259                      CALL draw_line                 ; draws the line

05B                             ;;===========================================================================
05B                             ;; Draws Decoration (Line 2b)
05B                             ;;============================================================================

05B  01000                      LOAD s0, 00                    ; load 00 into s0
05C  0118A                      LOAD s1, 8A                    ; load 8A into s1
05D  012FF                      LOAD s2, FF                    ; load FF into s2
05E  0138A                      LOAD s3, 8A                    ; load 8A into s3
05F  20259                      CALL draw_line                 ; draws the line

060                             ;;===========================================================================
060                             ;; Draws Decoration (Line 3b)
060                             ;;============================================================================

060  01000                      LOAD s0, 00                    ; load 00 into s0
061  0118C                      LOAD s1, 8C                    ; load 8A into s1
062  012FF                      LOAD s2, FF                    ; load FF into s2
063  0138C                      LOAD s3, 8C                    ; load 8C into s3
064  20259                      CALL draw_line                 ; draws the line

065                             ;;============================================================================
065                             ;; Draws the letter H (Line 1)
065                             ;;============================================================================

065                             ;; STARTING POINT
065  0150A                      LOAD s5, 0A                    ; load 10 into s5
066  2D500                      OUTPUT s5, stax                ; set desired stax
067  0161E                      LOAD s6, 1E                    ; load 30 into s6
068  2D601                      OUTPUT s6, stay                ; set desired stay

069                             ;; ENDING POINT
069  2D502                      OUTPUT s5, endx                ; set desired endx
06A  0163C                      LOAD s6, 3C                    ; load 60 into s6
06B  2D603                      OUTPUT s6, endy                ; set desired endy
06C  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

06D                             ;;============================================================================
06D                             ;; Draws the letter H (Line 2)
06D                             ;;============================================================================

06D                             ;; STARTING POINT
06D  0150A                      LOAD s5, 0A                    ; load 10 into s5
06E  2D500                      OUTPUT s5, stax                ; set desired stax
06F  0162D                      LOAD s6, 2D                    ; load 45 into s6
070  2D601                      OUTPUT s6, stay                ; set desired stay

071                             ;; ENDING POINT
071  0151E                      LOAD s5, 1E                    ; load 30 into s5
072  2D502                      OUTPUT s5, endx                ; set desired endx
073  2D603                      OUTPUT s6, endy                ; set desired endy
074  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

075                             ;;============================================================================
075                             ;; Draws the letter H (Line 3)
075                             ;;============================================================================

075                             ;; STARTING POINT
075  0151E                      LOAD s5, 1E                    ; load 30 into s5
076  2D500                      OUTPUT s5, stax                ; set desired stax
077  0161E                      LOAD s6, 1E                    ; load 30 into s6
078  2D601                      OUTPUT s6, stay                ; set desired stay

079                             ;; ENDING POINT
079  2D502                      OUTPUT s5, endx                ; set desired endx
07A  0163C                      LOAD s6, 3C                    ; load 60 into s6
07B  2D603                      OUTPUT s6, endy                ; set desired endy
07C  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

07D                             ;;============================================================================
07D                             ;; Draws the letter E (Line 1)
07D                             ;;============================================================================

07D                             ;; STARTING POINT
07D  01528                      LOAD s5, 28                    ; load 40 into s5
07E  2D500                      OUTPUT s5, stax                ; set desired stax
07F  0161E                      LOAD s6, 1E                    ; load 30 into s6
080  2D601                      OUTPUT s6, stay                ; set desired stay

081                             ;; ENDING POINT
081  2D502                      OUTPUT s5, endx                ; set desired endx
082  0163C                      LOAD s6, 3C                    ; load 60 into s6
083  2D603                      OUTPUT s6, endy                ; set desired endy
084  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

085                             ;;============================================================================
085                             ;; Draws the letter E (Line 2)
085                             ;;============================================================================

085                             ;; STARTING POINT
085  01528                      LOAD s5, 28                    ; load 40 into s5
086  2D500                      OUTPUT s5, stax                ; set desired stax
087  0161E                      LOAD s6, 1E                    ; load 30 into s6
088  2D601                      OUTPUT s6, stay                ; set desired stay

089                             ;; ENDING POINT
089  0153C                      LOAD s5, 3C                    ; load 60 into s5
08A  2D502                      OUTPUT s5, endx                ; set desired endx
08B  2D603                      OUTPUT s6, endy                ; set desired endy
08C  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

08D                             ;;============================================================================
08D                             ;; Draws the letter E (Line 3)
08D                             ;;============================================================================

08D                             ;; STARTING POINT
08D  01528                      LOAD s5, 28                    ; load 40 into s5
08E  2D500                      OUTPUT s5, stax                ; set desired stax
08F  0162D                      LOAD s6, 2D                    ; load 45 into s6
090  2D601                      OUTPUT s6, stay                ; set desired stay

091                             ;; ENDING POINT
091  0153C                      LOAD s5, 3C                    ; load 60 into s5
092  2D502                      OUTPUT s5, endx                ; set desired endx
093  2D603                      OUTPUT s6, endy                ; set desired endy
094  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

095                             ;;============================================================================
095                             ;; Draws the letter E (Line 3)
095                             ;;============================================================================

095                             ;; STARTING POINT
095  01528                      LOAD s5, 28                    ; load 40 into s5
096  2D500                      OUTPUT s5, stax                ; set desired stax
097  0163C                      LOAD s6, 3C                    ; load 45 into s6
098  2D601                      OUTPUT s6, stay                ; set desired stay

099                             ;; ENDING POINT
099  0153C                      LOAD s5, 3C                    ; load 60 into s5
09A  2D502                      OUTPUT s5, endx                ; set desired endx
09B  2D603                      OUTPUT s6, endy                ; set desired endy
09C  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

09D                             ;;============================================================================
09D                             ;; Draws the letter L (Line 1)
09D                             ;;============================================================================

09D                             ;; STARTING POINT
09D  01546                      LOAD s5, 46                    ; load 70 into s5
09E  2D500                      OUTPUT s5, stax                ; set desired stax
09F  0161E                      LOAD s6, 1E                    ; load 30 into s6
0A0  2D601                      OUTPUT s6, stay                ; set desired stay

0A1                             ;; ENDING POINT
0A1  2D502                      OUTPUT s5, endx                ; set desired endx
0A2  0163C                      LOAD s6, 3C                    ; load 60 into s6
0A3  2D603                      OUTPUT s6, endy                ; set desired endy
0A4  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0A5                             ;;============================================================================
0A5                             ;; Draws the letter L (Line 2)
0A5                             ;;============================================================================

0A5                             ;; STARTING POINT
0A5  01546                      LOAD s5, 46                    ; load 70 into s5
0A6  2D500                      OUTPUT s5, stax                ; set desired stax
0A7  0163C                      LOAD s6, 3C                    ; load 45 into s6
0A8  2D601                      OUTPUT s6, stay                ; set desired stay

0A9                             ;; ENDING POINT
0A9  0155A                      LOAD s5, 5A                    ; load 90 into s5
0AA  2D502                      OUTPUT s5, endx                ; set desired endx
0AB  2D603                      OUTPUT s6, endy                ; set desired endy
0AC  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0AD                             ;;============================================================================
0AD                             ;; Draws the letter I (Line 1)
0AD                             ;;============================================================================

0AD                             ;; STARTING POINT
0AD  01564                      LOAD s5, 64                    ; load 70 into s5
0AE  2D500                      OUTPUT s5, stax                ; set desired stax
0AF  0161E                      LOAD s6, 1E                    ; load 30 into s6
0B0  2D601                      OUTPUT s6, stay                ; set desired stay

0B1                             ;; ENDING POINT
0B1  2D502                      OUTPUT s5, endx                ; set desired endx
0B2  0163C                      LOAD s6, 3C                    ; load 60 into s6
0B3  2D603                      OUTPUT s6, endy                ; set desired endy
0B4  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0B5                             ;;============================================================================
0B5                             ;; Draws the letter C (Line 1)
0B5                             ;;============================================================================

0B5                             ;; STARTING POINT
0B5  01582                      LOAD s5, 82                    ; load 130 into s5
0B6  2D500                      OUTPUT s5, stax                ; set desired stax
0B7  0161E                      LOAD s6, 1E                    ; load 45 into s6
0B8  2D601                      OUTPUT s6, stay                ; set desired stay

0B9                             ;; ENDING POINT
0B9  01573                      LOAD s5, 73                    ; load 115 into s5
0BA  2D502                      OUTPUT s5, endx                ; set desired endx
0BB  2D603                      OUTPUT s6, endy                ; set desired endy
0BC  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0BD                             ;;============================================================================
0BD                             ;; Draws the letter C (Line 2)
0BD                             ;;============================================================================

0BD                             ;; STARTING POINT
0BD  01573                      LOAD s5, 73                    ; load 115 into s5
0BE  2D500                      OUTPUT s5, stax                ; set desired stax
0BF  0161E                      LOAD s6, 1E                    ; load 45 into s6
0C0  2D601                      OUTPUT s6, stay                ; set desired stay

0C1                             ;; ENDING POINT
0C1  0156E                      LOAD s5, 6E                    ; load 110 into s5
0C2  2D502                      OUTPUT s5, endx                ; set desired endx
0C3  01623                      LOAD s6, 23                    ; load 35 into s6
0C4  2D603                      OUTPUT s6, endy                ; set desired endy
0C5  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0C6                             ;;============================================================================
0C6                             ;; Draws the letter C (Line 3)
0C6                             ;;============================================================================

0C6                             ;; STARTING POINT
0C6  0156E                      LOAD s5, 6E                    ; load 110 into s5
0C7  2D500                      OUTPUT s5, stax                ; set desired stax
0C8  01623                      LOAD s6, 23                    ; load 35 into s6
0C9  2D601                      OUTPUT s6, stay                ; set desired stay

0CA                             ;; ENDING POINT
0CA  2D502                      OUTPUT s5, endx                ; set desired endx
0CB  01637                      LOAD s6, 37                    ; load 55 into s6
0CC  2D603                      OUTPUT s6, endy                ; set desired endy
0CD  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0CE                             ;;============================================================================
0CE                             ;; Draws the letter C (Line 4)
0CE                             ;;============================================================================

0CE                             ;; STARTING POINT
0CE  0156E                      LOAD s5, 6E                    ; load 110 into s5
0CF  2D500                      OUTPUT s5, stax                ; set desired stax
0D0  01637                      LOAD s6, 37                    ; load 55 into s6
0D1  2D601                      OUTPUT s6, stay                ; set desired stay

0D2                             ;; ENDING POINT
0D2  01573                      LOAD s5, 73                    ; load 130 into s5
0D3  2D502                      OUTPUT s5, endx                ; set desired endx
0D4  0163B                      LOAD s6, 3B                    ; load 44 into s6
0D5  2D603                      OUTPUT s6, endy                ; set desired endy
0D6  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0D7                             ;;============================================================================
0D7                             ;; Draws the letter C (Line 5)
0D7                             ;;============================================================================

0D7                             ;; STARTING POINT
0D7  01582                      LOAD s5, 82                    ; load 130 into s5
0D8  2D500                      OUTPUT s5, stax                ; set desired stax
0D9  0163C                      LOAD s6, 3C                    ; load 45 into s6
0DA  2D601                      OUTPUT s6, stay                ; set desired stay

0DB                             ;; ENDING POINT
0DB  01573                      LOAD s5, 73                    ; load 115 into s5
0DC  2D502                      OUTPUT s5, endx                ; set desired endx
0DD  2D603                      OUTPUT s6, endy                ; set desired endy
0DE  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0DF                             ;;============================================================================
0DF                             ;; Draws the letter O (Line 1)
0DF                             ;;============================================================================

0DF                             ;; STARTING POINT
0DF  01591                      LOAD s5, 91                    ; load 145 into s5
0E0  2D500                      OUTPUT s5, stax                ; set desired stax
0E1  0161E                      LOAD s6, 1E                    ; load 30 into s6
0E2  2D601                      OUTPUT s6, stay                ; set desired stay

0E3                             ;; ENDING POINT
0E3  0159B                      LOAD s5, 9B                    ; load 155 into s5
0E4  2D502                      OUTPUT s5, endx                ; set desired endx
0E5  2D603                      OUTPUT s6, endy                ; set desired endy
0E6  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0E7                             ;;============================================================================
0E7                             ;; Draws the letter O (Line 2)
0E7                             ;;============================================================================

0E7                             ;; STARTING POINT
0E7  01591                      LOAD s5, 91                    ; load 145 into s5
0E8  2D500                      OUTPUT s5, stax                ; set desired stax
0E9  0161E                      LOAD s6, 1E                    ; load 45 into s6
0EA  2D601                      OUTPUT s6, stay                ; set desired stay

0EB                             ;; ENDING POINT
0EB  0158C                      LOAD s5, 8C                    ; load 110 into s5
0EC  2D502                      OUTPUT s5, endx                ; set desired endx
0ED  0161E                      LOAD s6, 1E                    ; load 35 into s6
0EE  2D603                      OUTPUT s6, endy                ; set desired endy
0EF  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0F0                             ;;============================================================================
0F0                             ;; Draws the letter O (Line 3)
0F0                             ;;============================================================================

0F0                             ;; STARTING POINT
0F0  0158C                      LOAD s5, 8C                    ; load 140 into s5
0F1  2D500                      OUTPUT s5, stax                ; set desired stax
0F2  0161E                      LOAD s6, 1E                    ; load 30 into s6
0F3  2D601                      OUTPUT s6, stay                ; set desired stay

0F4                             ;; ENDING POINT
0F4  2D502                      OUTPUT s5, endx                ; set desired endx
0F5  0163C                      LOAD s6, 3C                    ; load 60 into s6
0F6  2D603                      OUTPUT s6, endy                ; set desired endy
0F7  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

0F8                             ;;============================================================================
0F8                             ;; Draws the letter O (Line 4)
0F8                             ;;============================================================================

0F8                             ;; STARTING POINT
0F8  0158C                      LOAD s5, 8C                    ; load 110 into s5
0F9  2D500                      OUTPUT s5, stax                ; set desired stax
0FA  0163C                      LOAD s6, 3C                    ; load 55 into s6
0FB  2D601                      OUTPUT s6, stay                ; set desired stay

0FC                             ;; ENDING POINT
0FC  01591                      LOAD s5, 91                    ; load 145 into s5
0FD  2D502                      OUTPUT s5, endx                ; set desired endx
0FE  0163C                      LOAD s6, 3C                    ; load 30 into s6
0FF  2D603                      OUTPUT s6, endy                ; set desired endy
100  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

101                             ;;============================================================================
101                             ;; Draws the letter O (Line 5)
101                             ;;============================================================================

101                             ;; STARTING POINT
101  01591                      LOAD s5, 91                    ; load 145 into s5
102  2D500                      OUTPUT s5, stax                ; set desired stax
103  0163C                      LOAD s6, 3C                    ; load 30 into s6
104  2D601                      OUTPUT s6, stay                ; set desired stay

105                             ;; ENDING POINT
105  0159B                      LOAD s5, 9B                    ; load 155 into s5
106  2D502                      OUTPUT s5, endx                ; set desired endx
107  2D603                      OUTPUT s6, endy                ; set desired endy
108  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

109                             ;;============================================================================
109                             ;; Draws the letter O (Line 6)
109                             ;;============================================================================

109                             ;; STARTING POINT
109  0159B                      LOAD s5, 9B                    ; load 110 into s5
10A  2D500                      OUTPUT s5, stax                ; set desired stax
10B  0163C                      LOAD s6, 3C                    ; load 55 into s6
10C  2D601                      OUTPUT s6, stay                ; set desired stay

10D                             ;; ENDING POINT
10D  015A0                      LOAD s5, A0                    ; load 160 into s5
10E  2D502                      OUTPUT s5, endx                ; set desired endx
10F  0163C                      LOAD s6, 3C                    ; load 30 into s6
110  2D603                      OUTPUT s6, endy                ; set desired endy
111  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

112                             ;;============================================================================
112                             ;; Draws the letter O (Line 7)
112                             ;;============================================================================

112                             ;; STARTING POINT
112  015A0                      LOAD s5, A0                    ; load 160 into s5
113  2D500                      OUTPUT s5, stax                ; set desired stax
114  0161E                      LOAD s6, 1E                    ; load 30 into s6
115  2D601                      OUTPUT s6, stay                ; set desired stay

116                             ;; ENDING POINT
116  2D502                      OUTPUT s5, endx                ; set desired endx
117  0163C                      LOAD s6, 3C                    ; load 60 into s6
118  2D603                      OUTPUT s6, endy                ; set desired endy
119  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

11A                             ;;============================================================================
11A                             ;; Draws the letter O (Line 8)
11A                             ;;============================================================================

11A                             ;; STARTING POINT
11A  015A0                      LOAD s5, A0                    ; load 160 into s5
11B  2D500                      OUTPUT s5, stax                ; set desired stax
11C  0161E                      LOAD s6, 1E                    ; load 30 into s6
11D  2D601                      OUTPUT s6, stay                ; set desired stay

11E                             ;; ENDING POINT
11E  0159B                      LOAD s5, 9B                    ; load 155 into s5
11F  2D502                      OUTPUT s5, endx                ; set desired endx
120  0161E                      LOAD s6, 1E                    ; load 30 into s6
121  2D603                      OUTPUT s6, endy                ; set desired endy
122  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

123                             ;;============================================================================
123                             ;; Draws the letter P (Line 1)
123                             ;;============================================================================
123  010AA                      LOAD s0, AA                    ; load 170 into s0
124  0111E                      LOAD s1, 1E                    ; load 30 into s1
125  012BE                      LOAD s2, BE                    ; load 190 into s2
126  013AA                      LOAD s3, AA                    ; keep s3 set at 30
127  20259                      CALL draw_line                 ; call the draw_line subroutine

128                             ;;============================================================================
128                             ;; Draws the letter P (Line 2)
128                             ;;============================================================================
128  010AA                      LOAD s0, AA                    ; load 170 into s0
129  0111E                      LOAD s1, 1E                    ; load 30 into s1
12A  012AA                      LOAD s2, AA                    ; load 170 into s2
12B  0133C                      LOAD s3, 3C                    ; load 60 into s3
12C  20259                      CALL draw_line                 ; call the draw_line subroutine

12D                             ;;============================================================================
12D                             ;; Draws the letter P (Line 3)
12D                             ;;============================================================================
12D  010AA                      LOAD s0, AA                    ; load 170 into s0
12E  0112D                      LOAD s1, 2D                    ; load 45 into s1
12F  012BE                      LOAD s2, BE                    ; load 190 into s2
130  0132D                      LOAD s3, 2D                    ; keep s0 set at 45
131  20259                      CALL draw_line                 ; call the draw_line subroutine

132                             ;;============================================================================
132                             ;; Draws the letter P (Line 4)
132                             ;;============================================================================
132  010BE                      LOAD s0, BE                    ; load 190 into s0
133  0111E                      LOAD s1, 1E                    ; load 30 into s1
134  012BE                      LOAD s2, BE                    ; load 190 into s2
135  0132D                      LOAD s3, 2D                    ; load 45 to s3
136  20259                      CALL draw_line                 ; call the draw_line subroutine

137                             ;;============================================================================
137                             ;; Draws the letter T (Line 1)
137                             ;;============================================================================
137  010C8                      LOAD s0, C8                    ; load 200 into s0
138  0111E                      LOAD s1, 1E                    ; load 30 into s1
139  012DC                      LOAD s2, DC                    ; load 220 into s2
13A  0131E                      LOAD s3, 1E                    ; load 30 to s3
13B  20259                      CALL draw_line                 ; call the draw_line subroutine

13C                             ;;============================================================================
13C                             ;; Draws the letter T (Line 2)
13C                             ;;============================================================================
13C  010D2                      LOAD s0, D2                    ; load 200 into s0
13D  0111E                      LOAD s1, 1E                    ; load 30 into s1
13E  012D2                      LOAD s2, D2                    ; load 220 into s2
13F  0133C                      LOAD s3, 3C                    ; load 60 to s3
140  20259                      CALL draw_line                 ; call the draw_line subroutine

141                             ;;============================================================================
141                             ;; Draws the letter E (Line 1)
141                             ;;============================================================================
141  010E6                      LOAD s0, E6                    ; load 230 into s0
142  0111E                      LOAD s1, 1E                    ; load 30 into s1
143  012E6                      LOAD s2, E6                    ; load 230 into s2
144  0133C                      LOAD s3, 3C                    ; load 30 to s3
145  20259                      CALL draw_line                 ; call the draw_line subroutine

146                             ;;============================================================================
146                             ;; Draws the letter E (Line 2)
146                             ;;============================================================================
146  010E6                      LOAD s0, E6                    ; load 230 into s0
147  0111E                      LOAD s1, 1E                    ; load 30 into s1
148  012FA                      LOAD s2, FA                    ; load 250 into s2
149  0131E                      LOAD s3, 1E                    ; load 30 to s3
14A  20259                      CALL draw_line                 ; call the draw_line subroutine

14B                             ;;============================================================================
14B                             ;; Draws the letter E (Line 3)
14B                             ;;============================================================================
14B  010E6                      LOAD s0, E6                    ; load 230 into s0
14C  0112D                      LOAD s1, 2D                    ; load 30 into s1
14D  012FA                      LOAD s2, FA                    ; load 250 into s2
14E  0132D                      LOAD s3, 2D                    ; load 30 to s3
14F  20259                      CALL draw_line                 ; call the draw_line subroutine

150                             ;;============================================================================
150                             ;; Draws the letter E (Line 4)
150                             ;;============================================================================
150  010E6                      LOAD s0, E6                    ; load 230 into s0
151  0113C                      LOAD s1, 3C                    ; load 30 into s1
152  012FA                      LOAD s2, FA                    ; load 250 into s2
153  0133C                      LOAD s3, 3C                    ; load 30 to s3
154  20259                      CALL draw_line                 ; call the draw_line subroutine

155                             ;;============================================================================
155                             ;; NEW LINE STARTS HERE (GAME)
155                             ;;============================================================================

155                             ;;============================================================================
155                             ;; Draws the letter G (Line 1)
155                             ;;============================================================================
155  01046                      LOAD s0, 46                    ; load 70 into s0
156  0115A                      LOAD s1, 5A                    ; load 90 into s1
157  0125A                      LOAD s2, 5A                    ; load 90 into s2
158  0135A                      LOAD s3, 5A                    ; load 90 to s3
159  20259                      CALL draw_line                 ; call the draw_line subroutine

15A                             ;;============================================================================
15A                             ;; Draws the letter G (Line 2)
15A                             ;;============================================================================
15A  01046                      LOAD s0, 46                    ; load 70 into s0
15B  0115A                      LOAD s1, 5A                    ; load 90 into s1
15C  01246                      LOAD s2, 46                    ; load 90 into s2
15D  01378                      LOAD s3, 78                    ; load 90 to s3
15E  20259                      CALL draw_line                 ; call the draw_line subroutine

15F                             ;;============================================================================
15F                             ;; Draws the letter G (Line 3)
15F                             ;;============================================================================
15F  01046                      LOAD s0, 46                    ; load 70 into s0
160  01178                      LOAD s1, 78                    ; load 90 into s1
161  0125A                      LOAD s2, 5A                    ; load 90 into s2
162  01378                      LOAD s3, 78                    ; load 90 to s3
163  20259                      CALL draw_line                 ; call the draw_line subroutine

164                             ;;============================================================================
164                             ;; Draws the letter G (Line 4)
164                             ;;============================================================================
164  0106E                      LOAD s0, 6E                    ; load 70 into s0
165  01169                      LOAD s1, 69                    ; load 90 into s1
166  0126E                      LOAD s2, 6E                    ; load 90 into s2
167  01378                      LOAD s3, 78                    ; load 90 to s3
168  20259                      CALL draw_line                 ; call the draw_line subroutine

169                             ;;============================================================================
169                             ;; Draws the letter G (Line 5)
169                             ;;============================================================================
169  0106E                      LOAD s0, 6E                    ; load 70 into s0
16A  01169                      LOAD s1, 69                    ; load 90 into s1
16B  01264                      LOAD s2, 64                    ; load 90 into s2
16C  01369                      LOAD s3, 69                    ; load 90 to s3
16D  20259                      CALL draw_line                 ; call the draw_line subroutine

16E  25000                      RETURN                         ; leave start_screen subroutine

16F                             ;;============================================================================
16F                             ;; Draw Helicopter - Draw Helicopter Subroutine
16F                             ;;============================================================================

16F            draw_helicopter:

16F  201B3                      CALL draw_helicopter_cockpit   ; call the subroutine to draw the cockpit
170  20227                      CALL draw_helicopter_blades    ; call the subroutine to draw the blades
171  201F2                      CALL draw_helicopter_tail      ; call the subroutine to draw the tail
172  2023B                      CALL draw_helicopter_smoke     ; call the subroutine to draw the smoke

173  25000                      RETURN                         ; go back from drawing helicopter


174                             ;;============================================================================
174                             ;; Draw Block - Draw Block Subroutine
174                             ;;============================================================================

174                 draw_block:

174                             ;;============================================================================
174                             ;; Draws Top Line of Block
174                             ;;============================================================================

174  005E0                      LOAD s5, se                    ; load 255 into s5 (horizontal center of block)
175  016E1                      LOAD s6, E1                    ; load 245 into s6
176  1C650                      COMPARE s6, s5                 ; checking if the block is done "peaking out" from the right (initial compare: 245 ? 255)
177  3A17D                      JUMP C, right_edge             ; jump to right_edge
178  0160A                      LOAD s6, 0A                    ; load 10 into s6
179  1C560                      COMPARE s5, s6                 ; comparing s5 and s6
17A  3A181                      JUMP C, left_edge              ; jump to left_edge
17B  32181                      JUMP Z, left_edge              ; jump to left_edge
17C  22185                      JUMP in_middle                 ; jump to in_middle

17D  2D500          right_edge: OUTPUT s5, stax                ; set desired stax
17E  1950A                      SUB s5, 0A                     ;
17F  2D502                      OUTPUT s5, endx                ; set desired stax
180  22188                      JUMP finished1                 ; jump to draw_ys

181  2D500           left_edge: OUTPUT s5, stax                ; set desired stax
182  01600                      LOAD s6, 00                    ; put 255 into s5
183  2D602                      OUTPUT s6, endx                ; set desired stax
184  22188                      JUMP finished1                 ; jump to draw_ys

185                  in_middle:
185  2D500                      OUTPUT s5, stax                ; set desired stax
186  1950A                      SUB s5, 0A                     ; subtract the width of block to get the other x coordinate
187  2D502                      OUTPUT s5, endx                ; set desired endx

188  2DF01           finished1: OUTPUT sf, stay                ; set desired stay
189  2DF03                      OUTPUT sf, endy                ; set desired endy
18A  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

18B                             ;;============================================================================
18B                             ;; Draws Bottom Line of Block
18B                             ;;============================================================================

18B  005F0                      LOAD s5, sf                    ; load sF into s5
18C  1153C                      ADD s5, 3C                     ; add 40 to s5
18D  2D501                      OUTPUT s5, stay                ; set desired stay
18E  2D503                      OUTPUT s5, endy                ; set desired endy
18F  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

190                             ;;============================================================================
190                             ;; Draws Right Vertical Line of Block
190                             ;;============================================================================

190  2DE00                      OUTPUT se, stax                ; set desired stax
191  2DE02                      OUTPUT se, endx                ; set desired endx
192  2DF01                      OUTPUT sf, stay                ; set desired stay
193  005F0                      LOAD s5, sf                    ; load sF into s5
194  1153C                      ADD s5, 3C                     ; add 60 to y coordinate
195  2D503                      OUTPUT s5, endy                ; set desired endy
196  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

197                             ;;============================================================================
197                             ;; Draws Left Vertical Line of Block
197                             ;;============================================================================

197  005E0                      LOAD s5, se                    ; load sE into s5
198  1950A                      SUB s5, 0A                     ; subtract 10 from s5
199  2D500                      OUTPUT s5, stax                ; set desired stax
19A  2D502                      OUTPUT s5, endx                ; set desired endx
19B  2DF01                      OUTPUT sf, stay                ; set desired stay
19C  005F0                      LOAD s5, sf                    ; load sF into s5
19D  1153C                      ADD s5, 3C                     ; add 60 to y coordinate
19E  2D503                      OUTPUT s5, endy                ; set desired endy
19F  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)
1A0  25000                      RETURN                         ; finished with draw_block subroutine



1A1                             ;;============================================================================
1A1                             ;; Random Block Location - Random Block Location Subroutine
1A1                             ;;============================================================================

1A1        random_block_location:
1A1  1DE00                      COMPARE se, 00                 ; is it time to create a new variable?
1A2  321A5                      JUMP Z, new_random             ; jump to new random creator
1A3  361A4                      JUMP NZ, skip_everything       ; goes back

1A4  25000     skip_everything: RETURN                         ; returns back (no new rand. number)

1A5  09507          new_random: INPUT s5, prng                 ; create to new random number
1A6  1D50F                      COMPARE s5, 0F                 ; check if it's in range
1A7  3E1A9                      JUMP NC, check_other_bound_range ; check lower bound of map
1A8  3A1A5                      JUMP C, new_random             ; get new variable

1A9        check_other_bound_range:
1A9  1D5B4                      COMPARE s5, B4                 ; compare s5 to 180
1AA  3E1A5                      JUMP NC, new_random            ; get a new random number
1AB  00F50                      LOAD sf, s5                    ; a new y coordinate generated
1AC  25000                      RETURN                         ; get out of subroutine

1AD                             ;;============================================================================
1AD                             ;; Move Helicopter Up - Move Helicopter Up Subroutine
1AD                             ;;============================================================================

1AD               move_heli_up:
1AD  1DC15                      COMPARE sc, 15                 ; check if the helicopter is colliding with top wall
1AE  361B1                      JUMP NZ, decrement             ; if not colliding, then move helicopter appropriately
1AF  3E1B1                      JUMP NC, decrement             ; necessary as well
1B0  25000                      RETURN                         ; do not increment if colliding with top wall
1B1                  decrement:
1B1  19C02                      SUB sc, 02                     ; move the helicopter up
1B2  25000                      RETURN                         ; get out of subroutine

1B3                             ;;============================================================================
1B3                             ;; Draw Helicopter Cockpit - Draw Helicopter Cockpit Subroutine
1B3                             ;;============================================================================

1B3        draw_helicopter_cockpit:

1B3                             ;;============================================================================
1B3                             ;; Draws Cockpit of Helicopter (Line 1a)
1B3                             ;;============================================================================

1B3                             ;; STARTING POINT
1B3  01564                      LOAD s5, 64                    ; load 100 into s5
1B4  2D500                      OUTPUT s5, stax                ; set desired stax
1B5  006C0                      LOAD s6, sc                    ; load sC into s5
1B6  2D601                      OUTPUT s6, stay                ; set desired stay

1B7                             ;; ENDING POINT
1B7  19501                      SUB s5, 01                     ; subtract 7 from s5
1B8  2D502                      OUTPUT s5, endx                ; set desired endx
1B9  19603                      SUB s6, 03                     ; go up by 5
1BA  2D603                      OUTPUT s6, endy                ; set desired endy
1BB  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1BC                             ;;============================================================================
1BC                             ;; Draws Cockpit of Helicopter (Line 1b)
1BC                             ;;============================================================================

1BC                             ;; STARTING POINT
1BC  01564                      LOAD s5, 64                    ; load 100 into s5
1BD  19501                      SUB s5, 01                     ; subtract 7 from s5
1BE  2D500                      OUTPUT s5, stax                ; set desired stax
1BF  006C0                      LOAD s6, sc                    ; load sC into s5
1C0  19603                      SUB s6, 03                     ; go up by 5
1C1  2D601                      OUTPUT s6, stay                ; set desired stay

1C2                             ;; ENDING POINT
1C2  19504                      SUB s5, 04                     ; subtract 7 from s5
1C3  2D502                      OUTPUT s5, endx                ; set desired endx
1C4  19602                      SUB s6, 02                     ; go up by 5
1C5  2D603                      OUTPUT s6, endy                ; set desired endy
1C6  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)


1C7                             ;;============================================================================
1C7                             ;; Draws Cockpit of Helicopter (Line 2a)
1C7                             ;;============================================================================

1C7                             ;; STARTING POINT
1C7  01564                      LOAD s5, 64                    ; load 100 into s5
1C8  2D500                      OUTPUT s5, stax                ; set desired stax
1C9  006C0                      LOAD s6, sc                    ; load sC into s5
1CA  2D601                      OUTPUT s6, stay                ; set desired stay

1CB                             ;; ENDING POINT
1CB  19501                      SUB s5, 01                     ; subtract 1 from s5
1CC  2D502                      OUTPUT s5, endx                ; set desired endx
1CD  11603                      ADD s6, 03                     ; go down by 3
1CE  2D603                      OUTPUT s6, endy                ; set desired endy
1CF  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1D0                             ;;============================================================================
1D0                             ;; Draws Cockpit of Helicopter (Line 2b)
1D0                             ;;============================================================================

1D0                             ;; STARTING POINT
1D0  01564                      LOAD s5, 64                    ; load 100 into s5
1D1  19501                      SUB s5, 01                     ; subtract 1 from s5
1D2  2D500                      OUTPUT s5, stax                ; set desired stax
1D3  006C0                      LOAD s6, sc                    ; load sC into s5
1D4  11603                      ADD s6, 03                     ; go down by 3
1D5  2D601                      OUTPUT s6, stay                ; set desired stay

1D6                             ;; ENDING POINT
1D6  19504                      SUB s5, 04                     ; subtract 7 from s5
1D7  2D502                      OUTPUT s5, endx                ; set desired endx
1D8  11602                      ADD s6, 02                     ; go down by 5
1D9  2D603                      OUTPUT s6, endy                ; set desired endy
1DA  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1DB                             ;;============================================================================
1DB                             ;; Draws Cockpit of Helicopter (Line 3)
1DB                             ;;============================================================================

1DB                             ;; STARTING POINT
1DB  01564                      LOAD s5, 64                    ; load 100 into s5
1DC  19505                      SUB s5, 05                     ; load 7 into s5
1DD  2D500                      OUTPUT s5, stax                ; set desired stax
1DE  006C0                      LOAD s6, sc                    ; load sC into s5
1DF  19605                      SUB s6, 05                     ; go up by 5 using subtraction
1E0  2D601                      OUTPUT s6, stay                ; set desired stay

1E1                             ;; ENDING POINT
1E1  19507                      SUB s5, 07                     ; subtract 5 from s5
1E2  2D502                      OUTPUT s5, endx                ; set desired endx
1E3  11605                      ADD s6, 05                     ; go down by 5
1E4  2D603                      OUTPUT s6, endy                ; set desired endy
1E5  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1E6                             ;;============================================================================
1E6                             ;; Draws Cockpit of Helicopter (Line 4)
1E6                             ;;============================================================================

1E6                             ;; STARTING POINT
1E6  01564                      LOAD s5, 64                    ; load 100 into s5
1E7  19505                      SUB s5, 05                     ; load 7 into s5
1E8  2D500                      OUTPUT s5, stax                ; set desired stax
1E9  006C0                      LOAD s6, sc                    ; load sC into s5
1EA  11605                      ADD s6, 05                     ; go down by 5 using addition
1EB  2D601                      OUTPUT s6, stay                ; set desired stay

1EC                             ;; ENDING POINT
1EC  19507                      SUB s5, 07                     ; subtract 5 from s5
1ED  2D502                      OUTPUT s5, endx                ; set desired endx
1EE  19605                      SUB s6, 05                     ; go back up by 5
1EF  2D603                      OUTPUT s6, endy                ; set desired endy
1F0  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1F1  25000                      RETURN                         ; go back from subroutine

1F2                             ;;============================================================================
1F2                             ;; Draw Helicopter Tail - Draw Helicopter Tail Subroutine
1F2                             ;;============================================================================

1F2        draw_helicopter_tail:

1F2                             ;;============================================================================
1F2                             ;; Draws Tail of Helicopter (Line 1)
1F2                             ;;============================================================================

1F2                             ;; STARTING POINT
1F2  01564                      LOAD s5, 64                    ; load 100 into s5
1F3  1950A                      SUB s5, 0A                     ; subtract 0xA from s5
1F4  2D500                      OUTPUT s5, stax                ; set desired stax
1F5  006C0                      LOAD s6, sc                    ; load sC into s5
1F6  19602                      SUB s6, 02                     ; subtract 2 from s6
1F7  2D601                      OUTPUT s6, stay                ; set desired stay

1F8                             ;; ENDING POINT
1F8  19507                      SUB s5, 07                     ; subtract 7 from s5
1F9  2D502                      OUTPUT s5, endx                ; set desired endx
1FA  2D603                      OUTPUT s6, endy                ; set desired endy
1FB  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

1FC                             ;;============================================================================
1FC                             ;; Draws Tail of Helicopter (Line 2)
1FC                             ;;============================================================================

1FC                             ;; STARTING POINT
1FC  01564                      LOAD s5, 64                    ; load 100 into s5
1FD  1950C                      SUB s5, 0C                     ; subtract 0xC from s5
1FE  2D500                      OUTPUT s5, stax                ; set desired stax
1FF  006C0                      LOAD s6, sc                    ; load sC into s5
200  2D601                      OUTPUT s6, stay                ; set desired stay

201                             ;; ENDING POINT
201  19508                      SUB s5, 08                     ; subtract 7 from s5
202  2D502                      OUTPUT s5, endx                ; set desired endx
203  2D603                      OUTPUT s6, endy                ; set desired endy
204  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

205                             ;;============================================================================
205                             ;; Draws Tail of Helicopter (Line 3)
205                             ;;============================================================================

205                             ;; STARTING POINT
205  01564                      LOAD s5, 64                    ; load 100 into s5
206  1950A                      SUB s5, 0A                     ; subtract 0x0A from s5
207  19508                      SUB s5, 08                     ; subtract 0x10 from s5
208  2D500                      OUTPUT s5, stax                ; set desired stax
209  006C0                      LOAD s6, sc                    ; load sC into s5
20A  19602                      SUB s6, 02                     ; subtract 2 from s6
20B  2D601                      OUTPUT s6, stay                ; set desired stay

20C                             ;; ENDING POINT
20C  19502                      SUB s5, 02                     ; subtract 2 from s5
20D  2D502                      OUTPUT s5, endx                ; set desired endx
20E  19602                      SUB s6, 02                     ; subtract 2 from s6
20F  2D603                      OUTPUT s6, endy                ; set desired endy
210  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

211                             ;;============================================================================
211                             ;; Draws Tail of Helicopter (Line 4)
211                             ;;============================================================================

211                             ;; STARTING POINT
211  01564                      LOAD s5, 64                    ; load 100 into s5
212  1950C                      SUB s5, 0C                     ; subtract 0x0C from s5
213  19509                      SUB s5, 09                     ; subtract 0x09 from s5
214  2D500                      OUTPUT s5, stax                ; set desired stax
215  006C0                      LOAD s6, sc                    ; load sC into s5
216  2D601                      OUTPUT s6, stay                ; set desired stay

217                             ;; ENDING POINT
217                             ;SUB s5, 01                          ; subtract 2 from s5
217  2D502                      OUTPUT s5, endx                ; set desired endx
218  11601                      ADD s6, 01                     ; add 1 to s6
219  2D603                      OUTPUT s6, endy                ; set desired endy
21A  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

21B                             ;;============================================================================
21B                             ;; Draws Tail of Helicopter (Line 5)
21B                             ;;============================================================================

21B                             ;; STARTING POINT
21B  01564                      LOAD s5, 64                    ; load 100 into s5
21C  1950A                      SUB s5, 0A                     ; subtract 0x0A from s5
21D  1950A                      SUB s5, 0A                     ; subtract 0x0A from s5
21E  2D500                      OUTPUT s5, stax                ; set desired stax
21F  006C0                      LOAD s6, sc                    ; load sC into s5
220  19604                      SUB s6, 04                     ; subtract 4 from s6
221  2D601                      OUTPUT s6, stay                ; set desired stay

222                             ;; ENDING POINT
222  2D502                      OUTPUT s5, endx                ; set desired endx
223  11605                      ADD s6, 05                     ; add 1 to s6
224  2D603                      OUTPUT s6, endy                ; set desired endy
225  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

226  25000                      RETURN                         ; go back from subroutine

227                             ;;============================================================================
227                             ;; Draw Helicopter Blades - Draw Helicopter Blades Subroutine
227                             ;;============================================================================

227        draw_helicopter_blades:

227                             ;;============================================================================
227                             ;; Draws Blades of Helicopter (Line 1)
227                             ;;============================================================================

227                             ;; STARTING POINT
227  01564                      LOAD s5, 64                    ; load 100 into s5
228  19505                      SUB s5, 05                     ; subtract 0xA from s5
229  2D500                      OUTPUT s5, stax                ; set desired stax
22A  006C0                      LOAD s6, sc                    ; load sC into s5
22B  19605                      SUB s6, 05                     ; subtract 2 from s6
22C  2D601                      OUTPUT s6, stay                ; set desired stay

22D                             ;; ENDING POINT
22D  2D502                      OUTPUT s5, endx                ; set desired endx
22E  19602                      SUB s6, 02                     ; subtract 2 from s6
22F  2D603                      OUTPUT s6, endy                ; set desired endy
230  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

231                             ;;============================================================================
231                             ;; Draws Blades of Helicopter (Line 2)
231                             ;;============================================================================

231                             ;; STARTING POINT
231  01564                      LOAD s5, 64                    ; load 100 into s5
232  2D500                      OUTPUT s5, stax                ; set desired stax
233  006C0                      LOAD s6, sc                    ; load sC into s5
234  19607                      SUB s6, 07                     ; subtract 2 from s6
235  2D601                      OUTPUT s6, stay                ; set desired stay

236                             ;; ENDING POINT
236  1950A                      SUB s5, 0A                     ; subtract 10 from s5
237  2D502                      OUTPUT s5, endx                ; set desired endx
238  2D603                      OUTPUT s6, endy                ; set desired endy
239  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)

23A  25000                      RETURN                         ; go back from subroutine

23B                             ;;============================================================================
23B                             ;; Draw Helicopter Smoke - Draw Helicopter Smoke Subroutine
23B                             ;;============================================================================

23B        draw_helicopter_smoke:

23B                             ;;============================================================================
23B                             ;; Draws Smoke of Helicopter (Line 1)
23B                             ;;============================================================================

23B                             ;; Start Point
23B  01564                      LOAD s5, 64                    ; load 100 into s5
23C  19528                      SUB s5, 28                     ; position starting smoke right point of line 1
23D  2D500                      OUTPUT s5, stax                ; output to starting x position of line 1

23E  006C0                      LOAD s6, sc                    ; load helicopter smoke vertical position for line 1
23F  2D601                      OUTPUT s6, stay                ; output to starting y position of line 1
240                             ;;

240                             ;; End Point
240  19504                      SUB s5, 04                     ; position starting smoke left point of line 1
241  2D502                      OUTPUT s5, endx                ; output to starting y position of line 1

242  2D603                      OUTPUT s6, endy                ; output to ending y position of line 1, matching helicopter
243  20263                      CALL old_draw_line             ;draws a line (careful: this subroutine overwrites s5)
244                             ;;

244                             ;;============================================================================
244                             ;; Draws Smoke of Helicopter (Line 2)
244                             ;;============================================================================

244                             ;; Start Point
244  01564                      LOAD s5, 64                    ; load 100 into s5
245  19534                      SUB s5, 34                     ; position starting smoke right point of line 2
246  2D500                      OUTPUT s5, stax                ; output to starting x position of line 2

247  006C0                      LOAD s6, sc                    ; load starting smoke vertical position for line 2
248  11604                      ADD s6, 04                     ; add 4 to s6 (shift down by 4)
249  2D601                      OUTPUT s6, stay                ; output to starting y position of line 2
24A                             ;;

24A                             ;; End Point
24A  19504                      SUB s5, 04                     ; subtract s5 by 4 for length of line
24B  2D502                      OUTPUT s5, endx                ; output to endx

24C  2D603                      OUTPUT s6, endy                ; outputs vertical locaton of smoke line 2
24D  20263                      CALL old_draw_line             ;draws a line (careful: this subroutine overwrites s5)
24E                             ;;

24E                             ;;============================================================================
24E                             ;; Draws Smoke of Helicopter (Line 3)
24E                             ;;============================================================================

24E                             ;; Start Point
24E  01564                      LOAD s5, 64                    ; load 100 into s5
24F  19540                      SUB s5, 40                     ; position starting smoke right point of line 3
250  2D500                      OUTPUT s5, stax                ; output to starting x position of line 3

251  006C0                      LOAD s6, sc                    ; load starting smoke vertical position for line 3
252  19604                      SUB s6, 04                     ; add 4 to s6 (shift down by 4)
253  2D601                      OUTPUT s6, stay                ; output to starting y position of line 3
254                             ;;

254                             ;; End Point
254  19504                      SUB s5, 04                     ; subtract s5 by 4 for length of line
255  2D502                      OUTPUT s5, endx                ; output to endx

256  2D603                      OUTPUT s6, endy                ; output same y position of line 3
257  20263                      CALL old_draw_line             ; draws a line (careful: this subroutine overwrites s5)
258                             ;;

258  25000                      RETURN                         ; go back to subroutine



259                             ;;============================================================================
259                             ;; Draw Line - Draw Line Subroutine
259                             ;;============================================================================

259  2D000           draw_line: OUTPUT s0, stax                ; write stax
25A  2D101                      OUTPUT s1, stay                ; write stay
25B  2D202                      OUTPUT s2, endx                ; write endx
25C  2D303                      OUTPUT s3, endy                ; write endy
25D  01501                      LOAD s5, busy_go               ; load go command
25E  2D504                      OUTPUT s5, busy                ; send go command
25F  09504                wait: INPUT s5, busy                 ; read busy status
260  1D501                      COMPARE s5, busy_go            ; check busy status
261  3225F                      JUMP Z, wait                   ; if busy, wait more
262  25000                      RETURN                         ; leave line drawing subroutine

263                             ;;============================================================================
263                             ;; Old Draw Line - Old Draw Line Subroutine (WILL DELETE LATER)
263                             ;;============================================================================

263              old_draw_line:
263  01501                      LOAD s5, busy_go               ; load go command
264  2D504                      OUTPUT s5, busy                ; send go command
265  09504               wait0: INPUT s5, busy                 ; read busy status
266  1D501                      COMPARE s5, busy_go            ; check busy status
267  32265                      JUMP Z, wait0                  ; if busy, wait more
268  25000                      RETURN                         ; leave line drawing subroutine

269                             ;;============================================================================
269                             ;; Check Collisions - Check Collisions Subroutine
269                             ;;============================================================================

269            check_collision:
269                             ;;============================================================================
269                             ;; Check Collisions with Map (top wall)
269                             ;;============================================================================
269  01560                      LOAD s5, 60                    ; position of heli/wall collision
26A  0180F                      LOAD s8, 0F                    ; top wall vertical coordinate (15)
26B  006C0                      LOAD s6, sc                    ; get vertical position of helicopter
26C  1960A                      SUB s6, 0A                     ; the helicopter's blades 10 pixels higher
26D  00760                      LOAD s7, s6                    ; used later for drawing the "spark"
26E  1C860                      COMPARE s8, s6                 ; check if the two intersect
26F  3228A                      JUMP Z, collision_occurred     ; jump to collision occurred
270  3E28A                      JUMP NC, collision_occurred    ; jump to collision occurred (necessary)

271                             ;;============================================================================
271                             ;; Check Collisions with Map (bottom wall)
271                             ;;============================================================================
271  018F0                      LOAD s8, F0                    ; bottom wall vertical coordinate (240)
272  006C0                      LOAD s6, sc                    ; get vertical position of helicopter
273  11605                      ADD s6, 05                     ; the helicopter's bottom is 5 pixels below
274  00760                      LOAD s7, s6                    ; used later for drawing the "spark"
275  1C860                      COMPARE s8, s6                 ; check if the two intersect
276  3228A                      JUMP Z, collision_occurred     ; jump to collision occurred

277                             ;;============================================================================
277                             ;; Check Collisions with Block
277                             ;;============================================================================

277  005E0                      LOAD s5, se                    ; get current horizontal position of block
278  1950A                      SUB s5, 0A                     ; actual block is 10 pixels back
279  1D564                      COMPARE s5, 64                 ; check if s5 coincides with heli (horizontal check)
27A  3227C                      JUMP Z, check_vertical         ; jump to check vertical positioning
27B  36286                      JUMP NZ, no_collision          ; jump to no_collision routine

27C             check_vertical:
27C  006F0                      LOAD s6, sf                    ; get current vertical position of block
27D  007C0                      LOAD s7, sc                    ; load helicopter front position
27E  1C760                loop: COMPARE s7, s6                 ; compare s7 and s6
27F  3228A                      JUMP Z, collision_occurred     ; jump to collision_occured
280  11601                      ADD s6, 01                     ; add one to s6
281  008F0                      LOAD s8, sf                    ; load original value for reference only
282  1183C                      ADD s8, 3c                     ; add 60 to s8
283  1C680                      COMPARE s6, s8                 ; compare s6 to bottom of block (s8)
284  32286                      JUMP Z, no_collision           ; jump to no_collision routine
285  3627E                      JUMP NZ, loop                  ; keep looping

286  19E01        no_collision: SUB se, 01                     ; decrement sE
287  11C01                      ADD sc, 01                     ; increment sC
288  20293                      CALL distance                  ; used for keeping the score (increments distance)
289  25000                      RETURN                         ; leave, since no collisions occurred

28A         collision_occurred:
28A  2D500                      OUTPUT s5, stax                ; set desired stax
28B  2D701                      OUTPUT s7, stay                ; set desired stay
28C  09807                      INPUT s8, prng                 ; load random endx
28D  2D802                      OUTPUT s8, endx                ; set random endx
28E  09807                      INPUT s8, prng                 ; load random endy
28F  2D803                      OUTPUT s8, endy                ; set random endy
290  20259                      CALL draw_line                 ; draw random line

291  01902                      LOAD s9, GAMEOVER_STATE        ; should go to gameover state instead
292  25000                      RETURN                         ; return from routine without any increments

293                             ;;============================================================================
293                             ;; Distance - Distance Subroutine
293                             ;;============================================================================

293  2DB0A            distance: OUTPUT sb, qssd_lo             ; put distance value to qssd
294  1DBFF                      COMPARE sb, FF                 ; check if max (FF) was reached
295  32298                      JUMP Z, distance2              ; jump to distance2
296  11B01                      ADD sb, one                    ; increment distance value
297  25000                      RETURN                         ; finished with distance subroutine

298  11A01           distance2: ADD sa, one                    ; add one to the next degree
299  01B00                      LOAD sb, zero                  ; reset sB
29A  2DB0A                      OUTPUT sb, qssd_lo             ; put distance value to qssd
29B  2DA0B                      OUTPUT sa, qssd_hi             ; put distance value to qssd
29C  25000                      RETURN                         ; finished with distance subroutine

7FF                             ;;============================================================================
7FF                             ;; Interrupt - Vector.
7FF                             ;;============================================================================

7FF                             ADDRESS 7FF                    ; must be located here
7FF  22012          isr_vector: JUMP isr                       ; always jump to isr

800                             ;;============================================================================
800                             ;;
800                             ;;============================================================================


PSM files that have been assembled
----------------------------------
    /home/adnan/Documents/School/EE178/fpga_video_game/latest_fpga_video_game/software/software.psm


List of defined constants
-------------------------
   CONSTANT name      Value  Source PSM file
   -------------      -----  ---------------
   BEL                07
   BS                 08
   CR                 0D
   CREDITS_STATE      03     software.psm
   DCS                90
   DEL                7F
   ESC                1B
   GAMEOVER_STATE     02     software.psm
   HT                 09
   LF                 0A
   NUL                00
   PLAY_STATE         01     software.psm
   ST                 9C
   START_STATE        00     software.psm
   VT                 0B
   beam               05     software.psm
   beam_hi            0f     software.psm
   beam_lo            03     software.psm
   beam_md            07     software.psm
   busy               04     software.psm
   busy_go            01     software.psm
   buttons            0f     software.psm
   buttons_ct         10     software.psm
   buttons_dn         04     software.psm
   buttons_lf         02     software.psm
   buttons_rt         01     software.psm
   buttons_up         08     software.psm
   datestamp_day      1E
   datestamp_month    0B
   datestamp_year     0F
   endx               02     software.psm
   endy               03     software.psm
   leds_hi            09     software.psm
   leds_lo            08     software.psm
   mode               06     software.psm
   mode_clr           01     software.psm
   mode_exp           03     software.psm
   mode_hld           00     software.psm
   mode_lin           02     software.psm
   one                01     software.psm
   prng               07     software.psm
   qssd_dp            0c     software.psm
   qssd_hi            0b     software.psm
   qssd_lo            0a     software.psm
   stax               00     software.psm
   stay               01     software.psm
   switches_hi        0e     software.psm
   switches_lo        0d     software.psm
   timestamp_hours    13
   timestamp_minutes  11
   timestamp_seconds  31
   zero               00     software.psm


  No tables defined


List of text strings
--------------------
   STRING name  Value          Source PSM file
   -----------  -----          ---------------
   datestamp$   "30 Nov 2015"
   timestamp$   "19:17:49"


List of line labels
-------------------
    Label                    Addr  Source PSM file
 --------                    ----  ---------------
 *  boot                     000   software.psm
    check_collision          269   software.psm
    check_other_bound_range  1A9   software.psm
    check_vertical           27C   software.psm
    collision_occurred       28A   software.psm
    decrement                1B1   software.psm
    distance                 293   software.psm
    distance2                298   software.psm
    draw_block               174   software.psm
    draw_helicopter          16F   software.psm
    draw_helicopter_blades   227   software.psm
    draw_helicopter_cockpit  1B3   software.psm
    draw_helicopter_smoke    23B   software.psm
    draw_helicopter_tail     1F2   software.psm
    draw_line                259   software.psm
    enter_play_state         01F   software.psm
    enter_play_state2        027   software.psm
    finished1                188   software.psm
    gameover                 022   software.psm
    in_middle                185   software.psm
    isr                      012   software.psm
 *  isr_vector               7FF   software.psm
    left_edge                181   software.psm
    loop                     27E   software.psm
    main                     011   software.psm
    map                      03C   software.psm
    move_heli_up             1AD   software.psm
    new_random               1A5   software.psm
    no_collision             286   software.psm
    old_draw_line            263   software.psm
    play                     032   software.psm
    random_block_location    1A1   software.psm
    right_edge               17D   software.psm
    skip_everything          1A4   software.psm
    start                    019   software.psm
    start_screen             047   software.psm
    stay_in_gameover_state   031   software.psm
    stay_in_start_state      021   software.psm
    wait                     25F   software.psm
    wait0                    265   software.psm

       * Unreferenced label(s)


List of pragma blocks
---------------------
   Name  Addr range  Value
   ----  ----------  -----


Instruction usage statistics
----------------------------
   Instruction  Instances
   -----------  ---------
   ADD          17
   ADDCY        -
   AND          -
   CALL         82
   CALL@        -
   COMPARE      20
   COMPARECY    -
   DISABLE      -
   ENABLE       1
   FETCH        -
   HWBUILD      -
   INPUT        11
   JUMP         30
   JUMP@        -
   LOAD         245
   LOAD&RETURN  -
   OR           -
   OUTPUT       191
   OUTPUTK      -
   REGBANK      -
   RETURN       23
   RETURNI      1
   RL           -
   RR           -
   SL0          -
   SL1          -
   SLA          -
   SLX          -
   SR0          -
   SR1          -
   SRA          -
   SRX          -
   STAR         -
   STORE        -
   SUB          49
   SUBCY        -
   TEST         -
   TESTCY       -
   XOR          -
